# ────────────────────────────────────────────────────────────────
# FreeRADIUS Clients Configuration for Netily
# Allows any client - actual validation happens via NAS table
# ────────────────────────────────────────────────────────────────

# Default client - allows initial connection, real validation via SQL
# This enables the "read_clients = yes" in sql.conf to work
client default {
    # Allow any IP initially - SQL module validates against 'nas' table
    ipaddr = 0.0.0.0/0
    
    # Default secret - routers MUST be in NAS table with correct secret
    # IMPORTANT: Override via RADIUS_SECRET env var in production
    secret = ${RADIUS_SECRET:-changeme_default}
    
    # Require proper NAS entry
    require_message_authenticator = no
    
    # Short name for logging
    shortname = default
}

# Local testing client
client localhost {
    ipaddr = 127.0.0.1
    secret = ${RADIUS_LOCAL_SECRET:-testing123}
    shortname = localhost
}

# Docker network - for internal testing
client docker {
    ipaddr = 172.16.0.0/12
    secret = ${RADIUS_DOCKER_SECRET:-docker_testing}
    shortname = docker
}
